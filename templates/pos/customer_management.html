{% extends 'base.html' %}
{% load static %}

{% block title %}Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ - Ù…Ø­Ù„ ÙƒØ±ÙŠÙ… Ù‡Ø±ÙŠØ¯ÙŠ Ù„Ù„Ø¨Ø¯Ù„ Ø§Ù„Ø±Ø­Ø§Ù„ÙŠ{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/customers.css' %}">

{% endblock %}

{% block content %}
<div class="admin-container">
    <section class="stats-grid">
        <div class="stat-card card-blue">
            <div class="stat-info">
                <span class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</span>
                <strong class="stat-value">{{ total_customers }}</strong>
            </div>
            <div class="stat-icon">ğŸ‘¥</div>
        </div>
        <div class="stat-card card-purple">
            <div class="stat-info">
                <span class="stat-label">Ø¹Ù…Ù„Ø§Ø¡ Ø¬Ø¯Ø¯ (Ø§Ù„Ø´Ù‡Ø±)</span>
                <strong class="stat-value">{{ new_customers_count }}</strong>
            </div>
            <div class="stat-icon">âœ¨</div>
        </div>
        <div class="stat-card card-green">
            <div class="stat-info">
                <span class="stat-label">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ†</span>
                <strong class="stat-value">{{ active_customers }}</strong>
            </div>
            <div class="stat-icon">ğŸ”¥</div>
        </div>
        <div class="stat-card card-orange">
            <div class="stat-info">
                <span class="stat-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·Ù„Ø¨Ø§Øª</span>
                <strong class="stat-value">{{ avg_orders }}</strong>
            </div>
            <div class="stat-icon">ğŸ“ˆ</div>
        </div>
    </section>

    <section class="filter-section">
        <form method="GET" class="search-wrapper">
            <div class="search-input-container">
                <input type="text" name="search" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ..." value="{{ search_query }}">
                <span class="search-i">ğŸ”</span>
            </div>
        </form>
        <div class="filter-tabs">
            <a href="?tab=all" class="tab-btn {% if current_tab == 'all' %}active{% endif %}">Ø§Ù„ÙƒÙ„</a>
            <a href="?tab=frequent" class="tab-btn {% if current_tab == 'frequent' %}active{% endif %}">Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</a>
        </div>
    </section>

    <div class="table-wrapper">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                    <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                </tr>
            </thead>
            <tbody>
                {% for customer in customers %}
                <tr>
                    <td>
                        <div class="user-info-cell">
                            <div class="user-avatar">{{ customer.name|slice:":1" }}</div>
                            <div class="user-details">
                                <strong>{{ customer.name }}</strong>
                                <small>#{{ customer.id }}</small>
                            </div>
                        </div>
                    </td>
                    <td class="text-center">{{ customer.mobil }}</td>
                    <td>
                        <div class="actions-btns">
                            <button class="btn-details" onclick="window.location.href='{% url 'customer_history' customer.id %}'">Ø³Ø¬Ù„</button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
{% extends 'base.html' %}
{% load static %}

{% block title %}ุฅุฏุงุฑุฉ ูุงุฆูุฉ ุงูุทุนุงู - ูุทุงุทุฑู ุงูุจุฑูุฉ{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/menu_admin.css' %}">
{% endblock %}

{% block content %}
<div class="admin-container">
    <header class="admin-header">
        <div class="header-title">
            <h1>ุฅุฏุงุฑุฉ ูุงุฆูุฉ ุงูุทุนุงู</h1>
            <p>ุชุญูู ูู ุงูุฃุตูุงู ูุงูุฃุณุนุงุฑ ูุชูุงูุฑ ุงููุฌุจุงุช ุจุณูููุฉ</p>
        </div>
        <a href="#product-form" class="btn-add-new">+ ุฅุถุงูุฉ ุตูู ุฌุฏูุฏ</a>
    </header>

    <section class="quick-stats">
        <div class="stat-card">
            <div class="stat-icon blue">๐ฝ๏ธ</div>
            <div class="stat-info">
                <span>ุฅุฌูุงูู ุงูุฃุตูุงู</span>
                <strong>{{ products.count }}</strong>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon green">โ</div>
            <div class="stat-info">
                <span>ุฃุตูุงู ูุชุงุญุฉ</span>
                <strong>12</strong>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon red">โ๏ธ</div>
            <div class="stat-info">
                <span>ุบูุฑ ูุชููุฑ</span>
                <strong>3</strong>
            </div>
        </div>
    </section>

    <section class="filter-bar">
        <div class="search-wrapper">
            <i class="search-icon">๐</i>
            <input type="text" placeholder="ุจุญุซ ุนู ุตูู ุจุงูุงุณู...">
        </div>
    </section>

    <div class="menu-grid">
        {% for product in products %}
        <div class="menu-item-card no-image {% if not product.available %}disabled{% endif %}">
            <div class="card-body">
                <div class="category-info">
                    <span class="category-label">{{ product.Category }}</span>
                </div>
                
                <div class="item-header">
                    <h3 class="item-name">{{ product.name }}</h3>
                    <div class="item-price-tag">{{ product.price }} ุฌ.ู</div>
                </div>
                
                <p class="item-desc">{{ product.description|default:"ูุง ููุฌุฏ ูุตู ููุฐุง ุงูุตูู" }}</p>

                <div class="item-controls">
                    <div class="availability-toggle">
                        <label class="switch">
                            <input type="checkbox" {% if product.available %}checked{% endif %} disabled>
                            <span class="slider round"></span>
                        </label>
                        <span class="status-text">{% if product.available %}ูุชุงุญ{% else %}ุบูุฑ ูุชุงุญ{% endif %}</span>
                    </div>
                    
                    <div class="action-buttons">
                        <a href="{% url 'menu_management' product.id %}" class="btn-icon edit" title="ุชุนุฏูู">โ๏ธ</a>
                        <form method="post" action="{% url 'menu_management' product.id %}" style="display:inline;" onsubmit="return confirm('ุญุฐู ูุฐุง ุงูุตููุ');">
                            {% csrf_token %}
                            <input type="hidden" name="delete" value="1">
                            <button type="submit" class="btn-icon delete" title="ุญุฐู">๐๏ธ</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="empty-state">ูุง ููุฌุฏ ุฃุตูุงู ุญุงููุงู</div>
        {% endfor %}
    </div>

    <div id="product-form" class="product-form-container">
        <div class="form-card">
            <h2>{% if editing_product %}ุชุนุฏูู: {{ editing_product.name }}{% else %}ุฅุถุงูุฉ ุตูู ุฌุฏูุฏ{% endif %}</h2>
            <form method="post">
                {% csrf_token %}
                <div class="form-fields">
                    {{ form.as_p }}
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-submit">ุญูุธ ุงูุตูู</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
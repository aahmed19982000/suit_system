<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© #{{ order.id }}</title>
    <style>
        @media print { .no-print { display: none; } }
        body { font-family: 'Arial', sans-serif; width: 80mm; margin: 0 auto; padding: 5px; color: #000; line-height: 1.4; }
        .text-center { text-align: center; }
        .header h1 { font-size: 26px; margin: 0; font-weight: 800; }
        .header p { margin: 2px 0; font-size: 16px; font-weight: bold; }
        
        .divider { border-top: 1px dashed #000; margin: 5px 0; }
        .solid-line { border-top: 3px solid #000; margin: 8px 0; }
        
        .info-table { width: 100%; border-collapse: collapse; font-size: 15px; margin: 10px 0; }
        .info-table td:last-child { text-align: left; font-weight: bold; }

        .items-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .items-table th { border-bottom: 1px dashed #000; padding: 5px 0; text-align: right; font-size: 16px; }
        .items-table td { padding: 5px 0; font-size: 15px; vertical-align: top; }
        
        .price-details { font-size: 17px; margin-top: 10px; }
        .price-row { display: flex; justify-content: space-between; padding: 3px 0; }
        .total-row { display: flex; justify-content: space-between; font-size: 22px; font-weight: 900; margin-top: 5px; padding: 5px 0; border-top: 1px solid #000; }

        .footer { font-size: 13px; margin-top: 15px; border-top: 2px solid #000; padding-top: 10px; font-weight: bold; }
        .rental-note { font-size: 16px; font-weight: 900; margin: 10px 0; }
    </style>
</head>
<body onload="window.print()">

    <div class="header text-center">
        <h1>ÙƒØ±ÙŠÙ… Ù‡Ø±ÙŠØ¯ÙŠ</h1>
        <p>{% if order.order_type == 'rental' %}Ø­Ø¬Ø² ÙˆØªØ£Ø¬ÙŠØ± Ø¨Ø¯Ù„{% else %}Ù…Ø­Ù„ Ø¨Ø¯Ù„ Ø±Ø¬Ø§Ù„ÙŠ{% endif %}</p>
        {% if order.order_type == 'sale' %}<p>Ø·Ø±ÙŠÙ‚ Ø£Ø³ÙŠÙˆØ· - Ø³ÙˆÙ‡Ø§Ø¬</p>{% endif %}
        <p>ğŸ“ 01002528882</p>
    </div>

    <div class="solid-line"></div>

    <table class="info-table">
        <tr>
            <td>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</td>
            <td>#{{ order.id }}</td>
        </tr>
        {% if order.order_type == 'rental' %}
        <tr>
            <td>Ø§Ù„Ø¹Ù…ÙŠÙ„:</td>
            <td>{{ order.customer.name }}</td>
        </tr>
        {% endif %}
        <tr>
            <td>Ø§Ù„ØªØ§Ø±ÙŠØ®:</td>
            <td>
                {% if order.order_type == 'sale' %}
                    {{ order.created_at|date:"Y/m/d h:i A" }}
                {% else %}
                    {{ order.rental_date|date:"Y/m/d" }}
                {% endif %}
            </td>
        </tr>
        <tr>
            <td>Ø§Ù„Ù†ÙˆØ¹:</td>
            <td>{% if order.order_type == 'sale' %}ÙØ§ØªÙˆØ±Ø© Ø¨ÙŠØ¹ Ù†Ù‚Ø¯ÙŠ{% else %}Ø¹Ù‚Ø¯ Ø¥ÙŠØ¬Ø§Ø± Ø¨Ø¯Ù„{% endif %}</td>
        </tr>
    </table>

    <div class="divider"></div>

    <table class="items-table">
        <thead>
            <tr>
                <th style="width: 60%;">{% if order.order_type == 'sale' %}Ø§Ù„ØµÙ†Ù{% else %}Ø§Ù„ÙˆØµÙ (UID){% endif %}</th>
                <th class="text-center">{% if order.order_type == 'sale' %}Ùƒ{% else %}{% endif %}</th>
                <th style="text-align: left;">{% if order.order_type == 'sale' %}Ø¬{% else %}Ø§Ù„Ø³Ø¹Ø±{% endif %}</th>
            </tr>
        </thead>
        <tbody>
            {% if order.order_type == 'sale' %}
                {% for item in order.items.all %}
                <tr>
                    <td>{{ item.product.name }}</td>
                    <td class="text-center">{{ item.quantity }}</td>
                    <td style="text-align: left;">{{ item.price }}</td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td>
                        <strong>Ø¨Ø¯Ù„Ø© ÙƒÙˆØ¯: {{ order.item.item.code|default:"RENT-9DA5950F" }}</strong><br>
                        <small>Ù…Ù‚Ø§Ø³: {{ order.size.size }} | Ø¨Ù†Ø·Ù„ÙˆÙ†: {{ order.pants_size }}</small>
                    </td>
                    <td></td>
                    <td style="text-align: left;">{{ order.total_price }} Ø¬.Ù…</td>
                </tr>
            {% endif %}
        </tbody>
    </table>

    <div class="solid-line"></div>

    <div class="price-details">
        {% if order.order_type == 'sale' %}
            <div class="total-row">
                <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
                <span>{{ order.total_price }} Ø¬.Ù…</span>
            </div>
        {% else %}
            <div class="price-row">
                <span>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±:</span>
                <span>{{ order.total_price }} Ø¬.Ù…</span>
            </div>
            <div class="price-row">
                <span>Ù…Ø¨Ù„Øº Ø§Ù„ØªØ£Ù…ÙŠÙ†:</span>
                <span>{{ order.deposit_amount }} Ø¬.Ù…</span>
            </div>
            <div class="total-row">
                <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ø¯Ø¯:</span>
                <span>{{ order.total_price|add:order.deposit_amount }} Ø¬.Ù…</span>
            </div>
        {% endif %}
    </div>

    {% if order.order_type == 'rental' %}
    <div class="solid-line"></div>
    <div style="font-size: 14px;">
        <div><strong>Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…:</strong> Ù…Ù† {{ order.rental_date|date:"d-m-Y" }} Ø¥Ù„Ù‰ {{ order.return_date|date:"d-m-Y" }}</div>
        <div><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> {{ order.notes|default:"Ù„Ø§ ÙŠÙˆØ¬Ø¯" }}</div>
    </div>
    {% endif %}

    <div class="footer text-center">
        {% if order.order_type == 'rental' %}
            <p class="rental-note">ÙŠØªÙ… Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„ØªØ£Ù…ÙŠÙ† Ø¹Ù†Ø¯ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¨Ø¯Ù„Ø© Ø¨Ø­Ø§Ù„ØªÙ‡Ø§</p>
        {% endif %}
        <p>Ø´ÙƒØ±Ø§Ù‹ Ù„Ø²ÙŠØ§Ø±ØªÙƒÙ… ğŸŒ¹</p>
        <p>{% if order.order_type == 'sale' %}Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø®Ù„Ø§Ù„ 14 ÙŠÙˆÙ…{% else %}Ø³ÙŠØ³ØªÙ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ø§Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©{% endif %}</p>
        <p style="font-size: 11px;">ØªØ·ÙˆÙŠØ± / Ø§Ø­Ù…Ø¯ Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… ğŸŒ¹</p>
    </div>

</body>
</html>